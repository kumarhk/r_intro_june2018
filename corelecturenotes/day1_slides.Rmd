---
title: 'Intro to R: Day 1'
author: "Kumar Ramanathan"
date: "`r Sys.Date()`"
output: 
  revealjs::revealjs_presentation:
    theme: moon
    incremental: true
    self_contained: false
    reveal_plugins: ["notes"]
params:
  notes: no
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
notes<-params$notes
```

# Introduction

## Why R?

## RStudio and RStudio Server

## Some key concepts

## Recall your DataCamp course

By now, you should all have completed the *Introduction to R* course on DataCamp. Congratulations! You already know quite a lot about how R works. 

To refresh, you covered the following material in your course:

- Arithmetic with R
- Objects and variable assignment
- Data types, including: character, numeric, logical, factors
- Data structures, including: vectors, matricies, data frames, lists

<aside class="notes">
Today, we will briefly review the above topics, and then turn to new material on reading and writing files, data manipulation, and data visualization.
</aside>

# Review: Basics and data types 

## Arithmetic

Open up the file `day1_exercises.R` in RStudio. Do the following tasks:

- Pick a number; save it as `x`
- Multiply x by 3
- Take the log of the above <small>(Hint, you need the function `log()` here)</small>
- Subtract 4 from the above
- Square the above

## Arithmetic

```{r arithmetic}
x <- 5
x*3
log(x*3)
log(x*3)-4
(log(x*3)-4)^2
```

## Comparisons and Logical Operators

- Check if 1 is bigger than 2
- Check if 1 + 1 is equal to 2
- Check if it is true that the strings "eat" and "drink" are not equal to each other
- Check if it is true that 1 is equal to 1 *AND* 1 is equal to 2 
  <small>(Hint: remember what the operators `&` and `|` do)</small>
- Check if it is true that 1 is equal to 1 *OR* 1 is equal to 2

## Comparisons and Logical Operators

```{r comparisons}
1 > 2
(1 + 1) == 2
"eat" != 'drink'
(1==1) & (1==2)
(1==1) | (1==2)
```

## Packages

- Install the package `tidyverse`
- Load the package `tidyverse`
- Open the help file for the function `recode` 
  <small>(Hint: remember what `?` does)</small>

## Packages

```{r packages, eval=F}
install.packages("tidyverse")

library(tidyverse)

?recode
```

## Data types

- **logical**: `TRUE` or `FALSE` 
  <small>(When co-coerced into numeric type, `TRUE`=`1` and `FALSE`=`0`)</small>
- **integer**: a specific type; most numbers are numeric instead
- **numeric**: real or decimal 
- **complex**: ex: `2+5i`
- **character**: `"text data"`, denoted with quotes
  <small>(`'single quotes'` and `"double quotes"` both work)</small>
- Use `typeof()` on an object to check its type

# Review: Data structures

## Vectors

- Vectors store multiple values of a single data type
- Create a vector using the `c()` function
- Vectors are homogenous: each vector can only contain one data type
- Arithmetic operators and many functions can apply to vectors
- Vectors can be *indexed* by element position (`vec[1]`), by 'slice' position (`vec[1:3]`), or by condition (`vec[vec>2]`).

## Vectors

Return to the exercise file and complete the following tasks:

- Run the code to generate variables `x1` and `x2`
- Select the 3rd element in `x1`
- Select the elements of x1 that are less than 0
- Select the elements of x2 that are greater than 1
- Create x3 containing the first five elements of x2
- Select all but the third element of x1

## Vectors

```{r vectors}
set.seed(1234) 
x1 <- rnorm(5)
x2 <- rnorm(20, mean=0.5)
x1[3]
x1[x1 < 0]
x2[x2 > 1]
x3 <- x2[1:5]
x1[-3]
```

## Interlude: Missing Values

Variables in datasets sometimes include missing variables. In R, missing values are stored as `NA`. Vectors containing any data type can contain missing values. Functions deal with missing values differently, and sometimes require arguments to specify how to deal with missing values.

```{r missing values}
vec <- c(1, 8, NA, 7, 3)
mean(vec)
mean(vec, na.rm=TRUE)
```

## Factors

- Factors are a special type of vector that are useful for categorical variables
- Factors have a limited number of *levels* that the variable can take, set by the user
- For categorical variables with natural ordering between categories, we often want to use *ordered factors*
- Create factors with `factor()`, which includes an argument for `levels = `

<aside class="notes">
We won't spend any more time reivewing factors today. If you need a refresher, check the lecture notes or review data camp. Each one tells you about factors from a different angle. The lecture notes focus on the utility of ordered factors, whereas data camp spends additional time on unordered factors.
</aside>

## Lists

- Lists are like vectors, but more complex.
- Lists are *heterogenous*: they can store single elements, vectors, or even lists.
- You can keep multi-dimensional and ragged data in R using lists.
- You can index an element in a list using double brackets: `[[1]]`. Single brackets will return the element as a list.

<aside class="notes">
For more on lists, see the lecture notes or data camp.
</aside>

## Matricies

- Matrices in R are two-dimensional arrays. 
- Matrices are *homogenous*: all values of a matrix must be of the same data type. 
- You can initialize a matrix using the `matrix()` function.
- Matrices are used sparingly in R, primarly for numerical calculations or explicit matrix manipulation.
- Matrices are indexed as follows: `mat[row no, col no]`.

<aside class="notes">
If you leave the row number blank in the index, R will return the entire column. If you leave the column number blank, it will return the entire row. We will see how this works with data frames in a moment.
There is an example matrix for you to practice with in the exercises file, but we won't do it together.
</aside>

## Data frames

- Data frames are the core data structure in R. A data frame is a list of named vectors with the same length.
- Data frames are *heterogenous*: the vectors in a data frames can each be of a different data type.
- Columns are typically variables and rows are observations.
- You can make make data frames by using the `data.frame()` function, or by combining vectors with `cbind()` or `rbind()`.
- Data frames can be indexed in the same way as matricies: `df[row no, col no]`.
- Data frames can also be indexed by using variable/column names: `df["var"]` or `df$var`.

## Data frames

- Load the example data frame using the code provided
- Identify the number of observations (rows) and number of variables (columns)
- Identify the names of the variables
- Select the variable `mpg`
- Select the 4th row
- Square the value of the `cyl` variable and store this as a new variable `cylsq`

# Break!

Let's take a break and return to learn two new skills: **reading files** and basic **data manipulation**.

# Reading files

## Working directories -- ASK LEWIS ABOUT HOW THIS WORKS IN RSTUDIO SERVER

## Reading files: read.csv()

```{r read.csv intro}
gapminder5 <- read.csv("data/gapminder5.csv", stringsAsFactors=FALSE)
```

```{r read.csv breakdown, eval=F}
gapminder5 <- read.csv(file = "data/gapminder5.csv",
                       sep = ",",
                       stringsAsFactors = FALSE)
```

## Reading files: read_csv()

- Install the `readr` package
- Use `read_csv()` to load the gapminder data

## Reading files: read_csv()

```{r read_csv}
gapminder5 <- read_csv("data/gapminder5.csv")
```

## Reading files

- You can also read files from URLs or the full local path
- You can import files using RStudio's interface through the "Files" tab
- For other file types, use the packages `haven` (Stata, SAS, SPSS) or `readxl` (Excel)

# Data manipulation

## Exploring data frames

- Remember: you can view data frames in RStudio with `View()` and examine other characteristics with `str()`, `dim()`, `names()`, `nrow()`, `ncol()`, and more.
- Notice that any data frames which have been read in or created, like all other objects, can be seen in the environment
- Frequency tables are a simple and useful way to explore variables in data frames
    - `table()` creates a frequency table of one or more variables
    - `prop.table()` can turn a frequency table into a proportion table

## Calculating summary statistics

## Subsetting

## Sorting

## Adding and removing columns

## Recoding variables

## Aggregating

## Statistics

# Writing files

## Writing a data file

## Save R objects

# Data visualization

## Base R vs. ggplot2

## Histograms

## Scatterplots

# Previewing Day 2 material